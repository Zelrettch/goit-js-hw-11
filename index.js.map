{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loader = document.querySelector('.loader-wrapper');\nconst gallery = document.querySelector('.gallery');\n\nexport function fillGalery(images, gallery) {\n  const cardset = images.map(e => {\n    return createCard(e);\n  });\n  gallery.append(...cardset);\n}\n\nfunction createCard(data) {\n  const img = document.createElement('img');\n  const stats = document.createElement('div');\n  const link = document.createElement('a');\n  const card = document.createElement('li');\n\n  card.classList.add('card');\n  stats.classList.add('stats');\n\n  link.href = data.largeImageURL;\n  const thumb = setupImg(img, data);\n\n  stats.append(...createFields(data));\n  link.append(thumb, stats);\n  card.append(link);\n\n  return card;\n}\n\nfunction setupImg(img, data) {\n  const thumb = document.createElement('div');\n\n  thumb.classList.add('thumb');\n  img.src = data.webformatURL;\n  img.alt = data.tags;\n\n  thumb.append(img);\n  return thumb;\n}\n\nfunction createFields(data) {\n  return ['likes', 'views', 'comments', 'downloads'].map(el => {\n    const field = document.createElement('div');\n    const label = document.createElement('span');\n    const value = document.createElement('span');\n\n    field.classList.add('field');\n    label.classList.add('label');\n    value.classList.add('value');\n\n    label.textContent = el;\n    value.textContent = data[el];\n\n    field.append(label, value);\n\n    return field;\n  });\n}\n\nexport function displayAlert(message) {\n  iziToast.show({\n    transitionIn: 'fadeInDown',\n    position: 'topRight',\n    color: 'red',\n    message,\n  });\n}\n\nexport function toggleLoader() {\n  loader.classList.toggle('is-hidden');\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n","'use strict';\n\nexport default function fetchImages(filter) {\n  const params = new URLSearchParams({\n    key: '47493519-a1c562378b8b6eff6e1575382',\n    q: filter,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(`https://pixabay.com/api/?${params}`).then(r => {\n    if (!r.ok) {\n      throw new Error(r.status);\n    }\n    return r.json();\n  });\n}\n","'use strict';\n\nimport {\n  fillGalery,\n  displayAlert,\n  clearGallery,\n  toggleLoader,\n} from './js/render-functions';\nimport fetchImages from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst ALLERT_MSG =\n  'Sorry, there are no images matching your search query. Please try again!';\n\nfunction handleImages(data) {\n  if (!data.hits.length) {\n    displayAlert(ALLERT_MSG);\n  }\n  fillGalery(data.hits, gallery);\n  lightbox.refresh();\n  form.reset();\n}\n\nfunction loadGallery(condition) {\n  clearGallery();\n  toggleLoader();\n\n  fetchImages(condition)\n    .then(d => {\n      handleImages(d);\n    })\n    .catch(e => {\n      displayAlert(e.message);\n    })\n    .finally(() => {\n      toggleLoader();\n    });\n}\n\nfunction handleSubmit(evt) {\n  evt.preventDefault();\n  const condition = form.elements.input.value.trim();\n  if (condition.length) {\n    loadGallery(condition);\n  }\n}\n\nform.addEventListener('submit', handleSubmit);\n"],"names":["loader","gallery","fillGalery","images","cardset","e","createCard","data","img","stats","link","card","thumb","setupImg","createFields","el","field","label","value","displayAlert","message","iziToast","toggleLoader","clearGallery","fetchImages","filter","params","form","lightbox","SimpleLightbox","ALLERT_MSG","handleImages","loadGallery","condition","d","handleSubmit","evt"],"mappings":"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"}